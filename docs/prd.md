# 凿壁项目产品需求文档 (PRD)

## 1. 简介

**"凿壁"** 项目旨在创建一个个人知识库，以结构化方式收集、展示和关联AI技术、信息化、研究与知识报告等领域的内容。作为专注于知识内容的平台，系统通过内容索引和知识图谱帮助用户快速找到需要的信息并发现内容间的关联。

### 1.1 背景

随着AI和信息化技术的快速发展，相关知识和研究不断涌现。个人需要一个系统来整理、关联和检索这些内容，形成结构化的知识体系，以便高效学习和应用。

### 1.2 目标用户

- **个人用户**：希望学习和了解AI技术、信息化升级等内容的人士
- **研究人员**：需要科研辅助工具和知识报告的专业研究者
- **学生**：寻找学术资源和知识组织方法的学习者
- **技术从业者**：关注AI生态和技术发展的IT/AI从业人员

### 1.3 核心价值主张

- **知识关联**：通过知识图谱展示内容间的连接，促进关联思考
- **结构化导航**：基于分类和时间线的多维度内容组织
- **易于检索**：提供高效搜索和筛选功能，快速定位所需内容
- **持续积累**：支持内容持续更新和知识体系不断扩展

## 2. 系统架构

### 2.1 技术架构

项目采用 **轻量级静态站点** 架构，具有以下特点：

- **静态生成**：HTML页面预先生成，无需后端服务器
- **客户端渲染**：首页动态功能通过客户端JavaScript实现
- **元数据驱动**：通过 `metadata.json` 集中管理内容信息
- **内容独立**：每个内容页面为独立的HTML文件，无全局依赖

选择此架构的原因：
- 部署简单，可轻松托管在GitHub Pages等平台
- 页面加载快速，用户体验良好
- 无需维护服务器，降低维护成本
- 内容可被搜索引擎有效索引

### 2.2 目录结构

项目文件结构如下：

```
项目根目录/
├── index.html                     # 首页/内容索引页
├── metadata.json                  # 内容元数据文件
├── dist/                          # 构建输出目录
│   ├── css/                       # 样式文件
│   ├── js/                        # 编译后的JavaScript
│   └── metadata.json              # 复制的元数据文件
├── ts/                            # TypeScript源代码
│   ├── main.ts                    # 主逻辑
│   ├── types.ts                   # 类型定义
│   └── components/                # 组件
├── pages/                         # 内容页面目录
│   ├── ai-tech/                   # AI技术与生态分类
│   ├── info-upgrade/              # 信息化升级分类
│   ├── knowledge/                 # 知识报告分类
│   └── research/                  # 科研辅助分类
```

## 3. 核心功能

### 3.1 首页/索引页 (`index.html`)

首页作为整个知识库的入口，提供内容导航、搜索和知识图谱展示。

#### 3.1.1 内容卡片区

**功能描述**：
- 以卡片形式展示所有内容条目
- 支持按分类、日期筛选
- 提供时间线视图和网格视图切换
- 展示内容标题、简介、发布日期和分类标签

**技术要求**：
- 使用响应式设计，适配不同设备
- 支持无限滚动或分页加载
- 实现平滑的视图切换动画
- 卡片内容从 `metadata.json` 动态生成

**UI/UX要求**：
- 卡片设计简洁，信息层次清晰
- 使用视觉元素区分不同分类
- 最新内容应有突出标识
- 提供列表/网格/时间线等多种查看模式

#### 3.1.2 知识图谱

**功能描述**：
- 可视化展示内容间的关联关系
- 基于共享关键词建立内容连接
- 支持交互式探索和导航
- 提供节点缩放和拖拽功能

**技术要求**：
- 使用D3.js实现交互式力导向图
- 节点大小反映内容的关联度
- 连线权重显示关联强度
- 图谱生成算法优化性能

**UI/UX要求**：
- 视觉风格协调统一
- 图谱布局清晰不拥挤
- 交互反馈及时明确
- 节点点击提供预览和导航选项

#### 3.1.3 搜索功能

**功能描述**：
- 全局搜索所有内容
- 支持标题、关键词和描述字段
- 实时搜索建议
- 搜索结果高亮显示

**技术要求**：
- 客户端搜索实现（基于metadata.json）
- 支持模糊匹配和关键词匹配
- 搜索性能优化
- 结果相关性排序

**UI/UX要求**：
- 搜索框位置醒目
- 搜索结果呈现简洁明了
- 支持键盘导航和快捷操作
- 无结果状态提供相关建议

#### 3.1.4 导航与主题切换

**功能描述**：
- 顶部导航栏提供分类入口
- 支持深色/浅色主题切换
- 提供简洁的关于信息
- "返回顶部"功能

**技术要求**：
- 主题切换保存用户偏好（localStorage）
- 响应式导航栏设计
- 平滑的主题过渡效果
- 与系统主题预设集成

**UI/UX要求**：
- 导航设计简约但功能完备
- 主题切换图标直观
- 页面状态变化有适当动画
- 适配移动设备的导航体验

### 3.2 内容页面 (`pages/*/*.html`)

内容页面是展示具体知识内容的独立HTML文件，每个页面保持设计独立性但需遵循基本规范。

#### 3.2.1 页面结构与元数据

**功能描述**：
- 展示完整的内容信息
- 包含必要的元数据标签
- 提供返回首页的链接
- 显示作者与版权信息

**技术要求**：
- HTML5语义化标记
- 必须包含以下meta标签：
  - `<meta name="category" content="分类名">`
  - `<meta name="description" content="页面描述">`
  - `<meta name="publish-date" content="YYYY-MM-DD">`
  - `<meta name="keywords" content="关键词1,关键词2,...">`
- 响应式布局适配各种设备
- 页面独立可用，不依赖外部资源（除CDN）

**UI/UX要求**：
- 内容排版清晰，阅读体验良好
- 代码块、图表等特殊内容有适当样式
- 标题层次分明
- 良好的打印适配

#### 3.2.2 内容展示

**功能描述**：
- 文本内容清晰呈现
- 支持各类富媒体（图片、视频、交互图表等）
- 代码块语法高亮
- 章节导航（适用于长内容）

**技术要求**：
- 使用适当的HTML结构和CSS样式
- 可选的轻量级JS增强功能
- 图像优化和响应式处理
- 可访问性标准遵循

**UI/UX要求**：
- 内容可读性优先
- 适当的内容间距和留白
- 响应式设计确保移动端体验
- 深色/浅色模式支持

#### 3.2.3 交互功能

**功能描述**：
- 目录跳转（对于长文档）
- 图片查看增强
- 返回顶部按钮
- 外部链接处理

**技术要求**：
- 轻量级JavaScript实现
- 不依赖全局功能
- 平滑滚动和动画效果
- 错误处理和降级方案

**UI/UX要求**：
- 交互元素状态清晰
- 功能图标简洁直观
- 操作反馈及时
- 保持整体风格一致性

## 4. 数据管理

### 4.1 元数据结构 (`metadata.json`)

元数据文件集中存储所有内容页面的基本信息，支持首页动态内容生成和知识图谱构建。

**文件格式**：JSON

**基本结构**：
```json
{
  "lastUpdated": "YYYY-MM-DDTHH:MM:SS.sssZ",
  "pages": [
    {
      "id": "pages/分类/文件名.html",
      "path": "pages/分类/文件名.html",
      "title": "内容标题",
      "category": "分类名称",
      "description": "内容简短描述...",
      "keywords": ["关键词1", "关键词2", "..."],
      "publish-date": "YYYY-MM-DD",
      "lastModifiedDate": "YYYY-MM-DDTHH:MM:SS.sssZ"
    },
    // 更多内容条目...
  ]
}
```

**字段说明**：
- `lastUpdated`: 元数据文件最后更新时间
- `pages`: 内容页面数组
  - `id`: 唯一标识符
  - `path`: 页面文件相对路径
  - `title`: 页面标题
  - `category`: 内容分类
  - `description`: 内容简介
  - `keywords`: 关键词数组
  - `publish-date`: 发布日期
  - `lastModifiedDate`: 最后修改时间

### 4.2 内容分类

内容按以下四个主要分类组织：

1. **AI技术与生态** (`ai-tech`)
   - AI模型与工具评测
   - 技术趋势分析
   - 开源生态探讨
   - 应用案例研究

2. **信息化升级** (`info-upgrade`)
   - 数字化转型方案
   - 信息系统建设
   - 数据治理与管理
   - 安全与隐私保护

3. **科研辅助** (`research`)
   - 研究方法论
   - 学术写作指南
   - 数据分析工具
   - 科研项目管理

4. **知识报告** (`knowledge`)
   - 领域知识综述
   - 学习资源整理
   - 概念解析
   - 读书笔记

### 4.3 元数据生成与维护

**生成方式**：
- 从HTML文件中提取meta标签信息
- 使用Node.js脚本自动化处理
- 支持批量更新和单文件更新

**更新流程**：
1. 新增/修改HTML内容页面
2. 运行元数据提取脚本
3. 更新metadata.json
4. 构建并部署

**维护工具**：
- `metadata-extractor.js`: 从HTML文件提取元数据
- `metadata-validator.js`: 检查元数据完整性和有效性
- `sync-metadata.js`: 同步metadata.json到dist目录

## 5. 用户体验设计

### 5.1 设计风格

**总体风格**：
- 简洁现代
- 专业学术
- 重视内容可读性
- 适度的视觉装饰

**色彩方案**：
- 主色调：蓝色系（#3B82F6 及其变体）
- 辅助色：柔和的紫色、绿色点缀
- 中性色：灰色层次（用于文本和背景）
- 深色模式专用色彩方案

**排版**：
- 正文：无衬线字体，优先使用系统字体栈
- 标题：适当的字重对比
- 行高：1.5-1.8（正文）
- 清晰的标题层级视觉区分

**空间利用**：
- 充分利用留白创建呼吸感
- 内容密度适中，避免拥挤
- 卡片和内容块使用适当间距
- 移动端优化垂直空间使用

### 5.2 响应式设计

**断点设计**：
- 移动端：< 640px
- 平板：640px - 1024px
- 桌面：> 1024px
- 大屏：> 1440px

**适配原则**：
- 移动优先设计
- 内容优先级调整
- UI元素位置智能重排
- 触控友好的交互设计

**特定调整**：
- 移动端：单列布局，折叠菜单
- 平板：双列布局，简化知识图谱
- 桌面：多列布局，完整功能
- 大屏：优化空间利用，扩展知识图谱

### 5.3 交互设计

**导航原则**：
- 扁平化层级，减少用户点击
- 提供多种导航路径（分类、搜索、图谱）
- 明确的位置指示
- 一致的返回机制

**反馈机制**：
- 按钮和链接有明确悬停状态
- 加载过程提供进度指示
- 操作结果给予及时反馈
- 错误状态友好提示

**过渡与动画**：
- 适度使用过渡动画增强体验
- 避免过度装饰性动画
- 确保动画流畅（60fps目标）
- 尊重用户的减少动画偏好设置

### 5.4 可访问性

**基本原则**：
- 符合WCAG 2.1 AA级标准
- 键盘可访问的交互元素
- 适当的颜色对比度
- 支持屏幕阅读器

**具体措施**：
- 语义化HTML结构
- ARIA标签适当使用
- 图像提供alt文本
- 可调整文本大小
- 确保表单和控件可访问

## 6. 技术实现

### 6.1 前端技术栈

**核心技术**：
- HTML5 + CSS3
- TypeScript
- D3.js（知识图谱可视化）

**辅助库**：
- Tailwind CSS（样式工具集）
- Day.js（日期处理）
- mark.js（搜索高亮）

**构建工具**：
- Vite（开发与构建）
- TypeScript编译器
- ESLint + Prettier（代码质量）

### 6.2 开发环境

**开发工具**：
- VS Code / WebStorm（推荐编辑器）
- Git（版本控制）
- Node.js环境（脚本运行）
- Yarn / npm（包管理）

**浏览器支持**：
- Chrome最新版
- Firefox最新版
- Safari最新版
- Edge最新版

### 6.3 部署环境

**部署选项**：
- GitHub Pages（推荐）
- Netlify
- Vercel
- 任何静态网站托管服务

**构建流程**：
1. 编译TypeScript
2. 优化资源（图像、CSS、JS）
3. 复制静态文件
4. 生成最终输出到`dist`目录

**CI/CD集成**：
- GitHub Actions自动化部署（可选）
- 提交到main分支触发构建
- 构建失败通知

## 7. 非功能需求

### 7.1 性能指标

**目标指标**：
- 首页加载时间：< 2秒（桌面），< 3秒（移动）
- 首次内容绘制(FCP)：< 1秒
- 累积布局偏移(CLS)：< 0.1
- 首次输入延迟(FID)：< 100ms
- 知识图谱渲染时间：< 1秒（100节点内）

**优化措施**：
- 资源压缩与优化
- 懒加载非关键资源
- 使用现代图像格式
- 代码分割和按需加载
- 知识图谱渲染优化

### 7.2 安全考虑

**基本安全措施**：
- 内容安全策略(CSP)实施
- 子资源完整性(SRI)验证
- HTTPS部署
- 安全的第三方依赖管理

**内容安全**：
- 第三方内容审核
- 外部链接安全检查
- 用户生成内容验证（如有）

### 7.3 可维护性

**代码质量**：
- 清晰的代码结构与注释
- 一致的编码风格（通过linter强制）
- 模块化设计
- 类型安全（TypeScript）

**文档**：
- 项目架构文档
- 组件和函数注释
- 开发指南
- 贡献指南

**测试**：
- 基本单元测试
- 响应式布局测试
- 兼容性测试
- 手动功能测试清单

## 8. 工作范围与限制

### 8.1 项目范围

**包含**：
- 首页/索引页实现
- 内容页面基础框架
- 元数据管理工具
- 知识图谱基本实现
- 响应式设计适配

**不包含**：
- 内容创作工具或CMS
- 用户账户或权限系统
- 后端API或数据库
- 复杂的分析功能
- 社交分享或互动功能

### 8.2 技术限制

**设计约束**：
- 纯静态站点，无服务器端处理
- 内容通过静态HTML文件提供
- 元数据通过JSON文件管理
- 客户端功能基于浏览器API

**兼容性要求**：
- 支持过去2年发布的主流浏览器版本
- 不保证IE11兼容性
- 基本功能在JavaScript禁用时仍可使用
- 响应式设计支持320px及以上屏幕宽度

### 8.3 内容限制

**内容来源**：
- 由项目维护者提供或审核
- 可包含外部引用（需适当引用）
- 需遵循内容规范和元数据要求

**更新频率**：
- 内容不定期更新
- 元数据每次内容更新后必须同步
- 知识图谱随元数据更新自动更新

## 9. 成功指标

### 9.1 用户指标

- 内容页平均停留时间 > 3分钟
- 每次访问浏览页面数 > 2页
- 知识图谱互动率 > 30%
- 搜索使用率 > 20%
- 返回访问率 > 40%

### 9.2 技术指标

- 所有性能指标达标
- 浏览器兼容性测试通过
- 代码质量评分 > 90%
- 构建成功率 > 99%
- 内容更新到部署时间 < 5分钟

## 10. 项目时间线

### 10.1 开发阶段

1. **设计阶段**：
   - 用户界面设计
   - 组件和模块设计
   - 数据结构设计

2. **开发阶段**：
   - 首页结构实现
   - 内容卡片组件
   - 知识图谱实现
   - 搜索功能
   - 响应式布局
   - 主题切换

3. **集成阶段**：
   - 元数据管理工具
   - 内容页面模板
   - 构建流程设置
   - 部署配置

4. **测试阶段**：
   - 功能测试
   - 性能测试
   - 兼容性测试
   - 用户体验评估

5. **发布阶段**：
   - 最终构建
   - 部署上线
   - 文档完善
   - 反馈收集

### 10.2 维护阶段

**定期活动**：
- 内容更新
- 性能监控
- 依赖更新
- 用户反馈收集

**计划改进**：
- 搜索功能增强
- 知识图谱优化
- 新的可视化方式
- 移动体验提升

## 11. 附录

### 11.1 术语表

- **知识图谱**：以可视化方式展示内容间关联关系的交互式图形
- **元数据**：描述内容属性的结构化数据，如标题、分类、关键词等
- **内容卡片**：在首页展示单个内容条目摘要的UI组件
- **静态站点**：预先生成HTML文件的网站，无需服务器端处理
- **响应式设计**：能够自适应不同屏幕尺寸和设备的页面设计

### 11.2 参考资源

- **设计参考**：
  - [Distill.pub](https://distill.pub/)（学术内容展示）
  - [Observable](https://observablehq.com/)（交互式内容）
  - [CSS-Tricks](https://css-tricks.com/)（技术内容布局）

- **技术参考**：
  - [D3.js文档](https://d3js.org/)
  - [Tailwind CSS文档](https://tailwindcss.com/docs)
  - [TypeScript文档](https://www.typescriptlang.org/docs/)

### 11.3 示例内容页面模板

基本HTML结构示例：

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- 必需的元数据标签 -->
  <meta name="publish-date" content="2025-01-15">
  <meta name="category" content="ai-tech">
  <meta name="description" content="本文详细分析了大语言模型在代码生成领域的最新进展...">
  <meta name="keywords" content="LLM,代码生成,AI编程,自动化开发">
  
  <title>大语言模型在代码生成中的应用 | 凿壁</title>
  
  <!-- 样式与脚本 -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    /* 页面特定样式 */
  </style>
</head>
<body>
  <!-- 导航区 -->
  <header>
    <nav>
      <a href="../../index.html">返回首页</a>
      <!-- 其他导航元素 -->
    </nav>
  </header>
  
  <!-- 内容区 -->
  <main>
    <article>
      <header>
        <h1>大语言模型在代码生成中的应用</h1>
        <div class="meta">
          <span>发布日期: 2025-01-15</span>
          <span>分类: AI技术与生态</span>
        </div>
      </header>
      
      <section>
        <!-- 文章内容 -->
      </section>
    </article>
  </main>
  
  <!-- 页脚 -->
  <footer>
    <div>
      <p>作者: 季晓康</p>
      <p>Email: jxk@sdu.edu.cn</p>
      <p>微信公众号：凿壁</p>
    </div>
    <p>&copy; 2025 国家健康医疗大数据研究院</p>
  </footer>
  
  <!-- 页面特定脚本 -->
  <script>
    // 页面交互逻辑
  </script>
</body>
</html>
```
