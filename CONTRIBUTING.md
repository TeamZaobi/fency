# 凿壁项目贡献指南

感谢您对凿壁项目的关注！本文档提供了参与项目贡献的指南，包括代码规范、分支策略和提交消息格式等内容。

## 目录

- [开发流程](#开发流程)
- [分支策略](#分支策略)
- [提交消息规范](#提交消息规范)
- [代码风格](#代码风格)
- [文档规范](#文档规范)
- [测试要求](#测试要求)
- [问题报告](#问题报告)
- [功能请求](#功能请求)

## 开发流程

1. 从最新的 `develop` 分支创建功能分支
2. 在功能分支上进行开发
3. 提交代码时遵循提交消息规范
4. 完成开发后，创建合并请求到 `develop` 分支
5. 代码审查通过后，合并到 `develop` 分支

## 分支策略

凿壁项目采用 Git Flow 工作流模型，包含以下分支类型：

- **main**：稳定的生产环境代码，只接受来自 release 和 hotfix 分支的合并
- **develop**：开发主分支，包含最新的开发代码
- **feature/***：新功能开发分支，从 develop 分支创建，完成后合并回 develop
- **release/***：发布准备分支，从 develop 分支创建，完成后合并到 main 和 develop
- **hotfix/***：紧急修复分支，从 main 分支创建，完成后合并到 main 和 develop
- **backup**：备份分支，保存原始代码的备份，仅作为历史记录

### 分支命名规范

- **feature分支**：`feature/功能名称`（例如：`feature/user-authentication`）
- **release分支**：`release/版本号`（例如：`release/1.2.0`）
- **hotfix分支**：`hotfix/版本号`（例如：`hotfix/1.2.1`）

## 提交消息规范

凿壁项目采用 Conventional Commits 规范，格式如下：

```
<类型>[可选作用域]: <描述>

[可选正文]

[可选脚注]
```

### 类型

- **feat**: 新功能
- **fix**: 错误修复
- **docs**: 文档更改
- **style**: 不影响代码含义的更改（空格、格式等）
- **refactor**: 既不修复错误也不添加功能的代码更改
- **perf**: 提高性能的代码更改
- **test**: 添加或修正测试
- **build**: 影响构建系统或外部依赖的更改
- **ci**: 对CI配置文件和脚本的更改
- **chore**: 其他不修改src或test文件的更改

### 示例

```
feat(auth): 添加用户登录功能

实现了基于JWT的用户认证系统，包括登录表单和后端验证。

Closes #123
```

## 代码风格

- 所有HTML/CSS/JavaScript代码必须遵循项目的代码风格指南
- 使用2个空格进行缩进
- 使用语义化的HTML标签
- 使用有意义的变量和函数名
- 避免过长的函数和复杂的条件语句
- 详细规则请参考 [audit/code-structure-best-practices.md](audit/code-structure-best-practices.md)

## 设计系统规范

本项目采用 **"Modern Professional" (现代专业)** 设计风格，核心样式定义在 `assets/css/fency-theme.css` 中。

### 核心原则
1. **Bento Grid 布局**: 使用 `.bento-grid` 和 `.bento-card` 构建模块化界面。
2. **色彩体系**:
   - **主色 (Slate)**: 用于文本和边框，传达专业感。
   - **强调色 (Indigo)**: 用于链接和交互元素。
   - **背景色 (Warm Sand)**: `#fdfbf7`，提供舒适的阅读体验。
3. **排版**: 标题使用 `Noto Serif SC`，正文使用 `Inter`。

### 开发要求
- **禁止硬编码颜色**: 必须使用 CSS 变量（如 `var(--color-primary)`）。
- **组件复用**: 优先使用 `fency-theme.css` 中定义的 `.btn`, `.tag`, `.card` 等通用类。
- **响应式**: 确保所有 Bento 卡片在移动端自动堆叠。

## 文档规范

- 所有新功能必须有相应的文档
- 文档应使用简体中文编写
- 代码注释应清晰解释复杂逻辑
- API文档应包含参数、返回值和示例
- 更新代码时同步更新相关文档

## 测试要求

- 所有新功能必须包含测试用例
- 修复错误时应添加相应的回归测试
- 测试覆盖率应保持在合理水平
- 提交前确保所有测试通过

## 问题报告

报告问题时，请包含以下信息：

- 问题的详细描述
- 复现步骤
- 预期行为与实际行为
- 截图（如适用）
- 环境信息（浏览器、操作系统等）

## 功能请求

提出功能请求时，请包含以下信息：

- 功能的详细描述
- 使用场景和用户价值
- 可能的实现方案
- 相关参考资料或示例

## 代理设置

由于网络环境的限制，在与 GitHub 交互时需要使用代理。我们已经配置了 Xray 代理服务，可以通过以下方式使用：

```bash
# 设置 Git 使用代理
export https_proxy=socks5://127.0.0.1:7911
export http_proxy=socks5://127.0.0.1:7911

# 或者在命令前临时使用代理
https_proxy=socks5://127.0.0.1:7911 git pull
```

---

感谢您的贡献！如有任何问题，请联系项目维护者。
